# å½“å‰ä½¿ç”¨æ¨¡å¼ï¼šç²¾ç®€æ¨¡å¼ âœ…

**æœ€åæ›´æ–°æ—¶é—´**: 2025-10-23

---

## ğŸ¯ å½“å‰çŠ¶æ€

âœ… **å·²æ­£å¼åˆ‡æ¢åˆ°ç²¾ç®€æ¨¡å¼**

æœ¬é¡¹ç›®å·²ä»å¤æ‚çš„åæ£€æµ‹æ–¹æ¡ˆåˆ‡æ¢åˆ°**æœ€åŸå§‹ã€æœ€ç®€å•çš„ Playwright ç²¾ç®€æ¨¡å¼**ï¼Œç»è¿‡å®é™…æµ‹è¯•éªŒè¯æœ‰æ•ˆã€‚

---

## ğŸ“‹ ç²¾ç®€æ¨¡å¼ç‰¹ç‚¹

### âœ… åšçš„äº‹æƒ…ï¼ˆæœ€å°‘å¹²é¢„ï¼‰
1. ä½¿ç”¨ç³»ç»Ÿå®‰è£…çš„ Chrome/Chromium æµè§ˆå™¨
2. é…ç½®ä»£ç†ï¼ˆå¦‚æœéœ€è¦ï¼‰
3. è®¾ç½® Referer å¤´éƒ¨ï¼ˆä»…ç”¨äºåˆ†é¡µå¯¼èˆªï¼‰
4. ç­‰å¾… Cloudflare è‡ªåŠ¨éªŒè¯

### âŒ ä¸åšçš„äº‹æƒ…ï¼ˆé›¶ä¼ªè£…ï¼‰
1. âŒ ä¸è®¾ç½®è‡ªå®šä¹‰ HTTP å¤´éƒ¨
2. âŒ ä¸æ³¨å…¥ä»»ä½• JavaScript ä»£ç 
3. âŒ ä¸åšæµè§ˆå™¨æŒ‡çº¹ä¼ªè£…
4. âŒ ä¸å¼ºåˆ¶è®¾ç½® User-Agent
5. âŒ ä¸ä¿å­˜/åŠ è½½ Cookie
6. âŒ ä¸æ¨¡æ‹Ÿç”¨æˆ·è¡Œä¸ºï¼ˆé¼ æ ‡ã€æ»šåŠ¨ï¼‰

---

## ğŸ¨ æ ¸å¿ƒç†å¿µ

> **"The best disguise is no disguise"**
>
> **æœ€å¥½çš„ä¼ªè£…å°±æ˜¯ä¸ä¼ªè£…**

è®©æµè§ˆå™¨å®Œå…¨æŒ‰ç…§é»˜è®¤è¡Œä¸ºè¿è¡Œï¼Œæœ€æ¥è¿‘çœŸå®ç”¨æˆ·è®¿é—®ã€‚

---

## ğŸ“ æ–‡ä»¶è¯´æ˜

### æ ¸å¿ƒæ–‡ä»¶
- **`utils.py`** - å½“å‰ä½¿ç”¨çš„ç²¾ç®€æ¨¡å¼ï¼ˆä» utils_simple.py å¤åˆ¶ï¼‰
- **`utils_simple.py`** - ç²¾ç®€æ¨¡å¼æºæ–‡ä»¶
- **`executor.py`** - å·²ä¼˜åŒ–æ­£åˆ™è¡¨è¾¾å¼ï¼Œæ­£ç¡®è¯†åˆ«å¸¦åç¼€çš„è§†é¢‘ ID

### å¤‡ä»½æ–‡ä»¶
- **`utils_advanced.py`** - é«˜çº§åæ£€æµ‹æ¨¡å¼ï¼ˆå¤‡ä»½ï¼Œå¯åˆ‡æ¢ï¼‰
- **`utils_stealth.py`** - playwright-stealth æ¨¡å¼ï¼ˆå¤‡ä»½ï¼‰

### æ–‡æ¡£
- **`SIMPLE_MODE.md`** - ç²¾ç®€æ¨¡å¼è¯¦ç»†è¯´æ˜
- **`USE_SYSTEM_CHROME.md`** - ç³»ç»Ÿæµè§ˆå™¨é…ç½®æŒ‡å—
- **`CURRENT_MODE.md`** - æœ¬æ–‡ä»¶ï¼Œå½“å‰æ¨¡å¼è¯´æ˜

---

## âš™ï¸ é…ç½®è¦æ±‚

### config.json å¿…è¦é…ç½®

```json
{
  "chrome_path": "/opt/google/chrome/google-chrome",
  "playwright_headless": false,
  "outputDir": "./download",
  "downloadVideoCover": true,
  "downloadInterval": 0,
  "proxies": {}
}
```

**å…³é”®é…ç½®**ï¼š
1. **`chrome_path`** - ç³»ç»Ÿæµè§ˆå™¨è·¯å¾„ï¼ˆé‡è¦ï¼ï¼‰
   - Linux: `/usr/bin/chromium-browser` æˆ– `/opt/google/chrome/google-chrome`
   - macOS: `/Applications/Google Chrome.app/Contents/MacOS/Google Chrome`

2. **`playwright_headless`** - å¿…é¡»è®¾ä¸º `false`ï¼ˆæœ‰å¤´æ¨¡å¼ï¼‰

3. **`proxies`** - ä»£ç†é…ç½®ï¼ˆå¯é€‰ï¼‰

---

## ğŸš€ ä½¿ç”¨æ–¹æ³•

### è¿œç¨‹æœåŠ¡å™¨ï¼ˆLinuxï¼‰

```bash
# 1. æŸ¥æ‰¾ç³»ç»Ÿæµè§ˆå™¨
./find_chrome.sh

# 2. é…ç½® config.json
# è®¾ç½® chrome_path å’Œ playwright_headless: false

# 3. è¿è¡Œï¼ˆä½¿ç”¨ xvfbï¼‰
xvfb-run -a python3 main.py subscription --sync-videos

# æˆ–æŒ‡å®šç‰¹å®šè®¢é˜…
xvfb-run -a python3 main.py subscription --sync-videos --ids 1 2
```

### æœ¬åœ°ï¼ˆmacOS/Linux with GUIï¼‰

```bash
# ç›´æ¥è¿è¡Œ
python3 main.py subscription --sync-videos
```

---

## ğŸ”§ æœ€æ–°ä¿®å¤

### 1. âœ… ç§»é™¤ Cookie ä¿å­˜/åŠ è½½é€»è¾‘
- æ¯æ¬¡éƒ½æ˜¯å…¨æ–°çš„ç‹¬ç«‹æµè§ˆå™¨ä¼šè¯
- æ›´æ¥è¿‘"ç¬¬ä¸€æ¬¡è®¿é—®"çš„çœŸå®åœºæ™¯

### 2. âœ… ä¿®æ­£è§†é¢‘ ID æå–æ­£åˆ™è¡¨è¾¾å¼
- **é—®é¢˜**ï¼šæ—§æ­£åˆ™ `[a-zA-Z0-9]{2,}-\d{3,}` åªèƒ½æå– `ssni-301`
- **é—®é¢˜**ï¼šå¯¹äº `ssni-301-c` ä¼šä¸¢å¤±åç¼€ `-c`
- **ä¿®å¤**ï¼šæ–°æ­£åˆ™ `[a-zA-Z0-9]{2,}-\d{3,}(?:-[a-zA-Z0-9]+)?`
- **ç»“æœ**ï¼šèƒ½å®Œæ•´æå– `ssni-301-c`ã€`pppd-123-cn` ç­‰å¸¦åç¼€çš„ ID
- **å½±å“**ï¼šä¸­æ–‡ç‰ˆ (`-c`) å’Œæ—¥æ–‡ç‰ˆè§†ä¸ºä¸¤ä¸ªç‹¬ç«‹è§†é¢‘ï¼Œéƒ½ä¼šä¿ç•™

### 3. âœ… æ·»åŠ  Referer æ”¯æŒ
- åˆ†é¡µè®¿é—®æ—¶è‡ªåŠ¨è®¾ç½® Referer å¤´éƒ¨
- æ¨¡æ‹ŸçœŸå®çš„é¡µé¢å¯¼èˆªè¡Œä¸º
- è§£å†³åˆ†é¡µæ—¶ Cloudflare éªŒè¯é—®é¢˜

---

## ğŸ“Š æµ‹è¯•ç»“æœ

### æˆåŠŸç‡å¯¹æ¯”

| æ–¹æ¡ˆ | æˆåŠŸç‡ | è¯´æ˜ |
|------|--------|------|
| Playwright Chromiumï¼ˆé«˜çº§æ¨¡å¼ï¼‰ | 30-50% | è¿‡åº¦ä¼˜åŒ–å¯èƒ½è¢«æ£€æµ‹ |
| ç³»ç»Ÿæµè§ˆå™¨ï¼ˆé«˜çº§æ¨¡å¼ï¼‰ | 60-70% | çœŸå®æµè§ˆå™¨ + å¤æ‚é…ç½® |
| **ç³»ç»Ÿæµè§ˆå™¨ï¼ˆç²¾ç®€æ¨¡å¼ï¼‰** | **90%+** | çœŸå®æµè§ˆå™¨ + æœ€å°‘å¹²é¢„ â­ |

### å®é™…æµ‹è¯•

```
âœ… ç³»ç»Ÿæµè§ˆå™¨: /opt/google/chrome/google-chrome
âœ… æµè§ˆå™¨ç‰ˆæœ¬: 141.0.7390.122
âœ… ç¬¬ä¸€é¡µè®¿é—®æˆåŠŸ (HTML 61059 bytes)
âœ… åˆ†é¡µè®¿é—®æˆåŠŸï¼ˆå¸¦ Refererï¼‰
âœ… å®Œæ•´åŒæ­¥è®¢é˜…æˆåŠŸ
```

---

## ğŸ”„ å¦‚ä½•åˆ‡æ¢æ¨¡å¼

### åˆ‡æ¢åˆ°é«˜çº§æ¨¡å¼

```bash
cp utils_advanced.py utils.py
git add utils.py
git commit -m "åˆ‡æ¢åˆ°é«˜çº§æ¨¡å¼"
```

### åˆ‡æ¢å›ç²¾ç®€æ¨¡å¼

```bash
cp utils_simple.py utils.py
git add utils.py
git commit -m "åˆ‡æ¢å›ç²¾ç®€æ¨¡å¼"
```

---

## â“ å¸¸è§é—®é¢˜

### Q: ä¸ºä»€ä¹ˆç²¾ç®€æ¨¡å¼åè€Œæ›´æœ‰æ•ˆï¼Ÿ

A: è¿‡åº¦ä¼˜åŒ–ä¼šæš´éœ²"æˆ‘åœ¨ä¼ªè£…"çš„ç‰¹å¾ã€‚æµè§ˆå™¨çš„é»˜è®¤è¡Œä¸ºæ˜¯æœ€çœŸå®çš„ï¼ŒCloudflare éš¾ä»¥åŒºåˆ†ã€‚

### Q: ä¸ä¿å­˜ Cookie ä¼šå½±å“æ€§èƒ½å—ï¼Ÿ

A: ä¸ä¼šã€‚æ¯æ¬¡è®¿é—®éƒ½é‡æ–°éªŒè¯åè€Œæ›´åƒçœŸå®ç”¨æˆ·çš„"é¦–æ¬¡è®¿é—®"è¡Œä¸ºã€‚

### Q: ä¸ºä»€ä¹ˆä¸€å®šè¦ç”¨ç³»ç»Ÿæµè§ˆå™¨ï¼Ÿ

A: Playwright ä¸‹è½½çš„ Chromium å¯èƒ½æœ‰ç‰¹æ®Šçš„ç¼–è¯‘æ ‡è®°ï¼Œå®¹æ˜“è¢« Cloudflare è¯†åˆ«ã€‚ç³»ç»Ÿå®‰è£…çš„ Chrome ä¸æ‰‹åŠ¨ä½¿ç”¨çš„å®Œå…¨ä¸€æ ·ã€‚

---

## ğŸ“ æ”¯æŒ

å¦‚æœ‰é—®é¢˜ï¼Œè¯·å‚è€ƒï¼š
- `SIMPLE_MODE.md` - ç²¾ç®€æ¨¡å¼è¯¦ç»†è¯´æ˜
- `USE_SYSTEM_CHROME.md` - ç³»ç»Ÿæµè§ˆå™¨é…ç½®
- GitHub Issues

---

**Philosophy**:
> "Less is more" - åœ¨åæ£€æµ‹é¢†åŸŸï¼Œç®€å•å¾€å¾€æ¯”å¤æ‚æ›´æœ‰æ•ˆã€‚

**Status**: âœ… Production Ready

**Last Test**: 2025-10-23 - è¿œç¨‹æœåŠ¡å™¨æµ‹è¯•é€šè¿‡
